<script id="tnl">
    <![CDATA[
	require( "Media/Scripts/functions.steel" );
	return tnl($_LEVEL);
	]]>
</script>
<script id="lnt">
    <![CDATA[
	require( "Media/Scripts/functions.steel" );
	return lnt($_XP);
	]]>
</script>
<script id="on_attack">
    <![CDATA[
        require( "Media/Scripts/functions.steel" );
        if($_Amount > 0){
            declare $raw_bp = 100 * ($_Amount / getCharacterAttribute($_Character,$_MAXHP));
            augmentCharacterAttribute($_Character,$_BP,$raw_bp);   
        }
        // Now, let's do the status effect inflictions on armor
        // TODO: Distinguish between ranged and melee attacks!!!!
        declare @status_effects;
        declare @armor = getEquippedArmor($_Character); // This will return empty for monsters.
        foreach (declare $armor) in @armor {
            invokeArmor($_Character,$armor);
            @status_effects += tryEquipmentStatusEffectInflictions($armor,$_Attacker);
        }
        foreach (declare $effect) in @status_effects {
            addStatusEffect($_Attacker,$effect);
        }
        
        ]]>
</script>
