<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE level SYSTEM "level.dtd">
<level name="TestLevel">
	<levelHeader music="Main" width="3" height="3"/>
	<tile name="1" xpos="0" ypos="0" zorder="1">
		<tilemap mapname="grass" mapx="4" mapy="12"/>
	</tile>
	<tile name="2" xpos="0" ypos="1">
		<tilemap mapname="rock" mapx="1" mapy="2"/>
		<directionBlock east="true" north="true" south="true" west="true"/>
	</tile>
	<tile name="3" xpos="0" ypos="2">
		<tilemap mapname="path" mapx="1" mapy="2"/>
	</tile>
	<tile name="4" xpos="1" ypos="0">
		<tilemap mapname="path" mapx="1" mapy="2"/>
	</tile>
	<tile name="5" xpos="1" ypos="1">
			<!-- Here's an animated sprite tile instead of a regular tile -->
		<spriteRef>tiles/Lava</spriteRef>
			<!-- Your primary character loses 10 hp for stepping here -->
		<attributeModifier add="-10" attribute="HP" target="primary">
			<condition>
				<hasItem not="true">
					<itemRef itemType="Special">AsbestosFeet</itemRef>
				</hasItem>
			</condition>
		</attributeModifier>
		
	</tile>
	<tile name="6" xpos="1" ypos="2">
		<tilemap mapname="water" mapx="1" mapy="6"/>
	</tile>
	<tile name="7" xpos="2" ypos="0">
		<tilemap mapname="path" mapx="1" mapy="2"/>
	</tile>
	<tile name="8" xpos="2" ypos="1">
		<tilemap mapname="path" mapx="1" mapy="2"/>
	</tile>
	<tile name="9" xpos="2" ypos="2">
		<tilemap mapname="door" mapx="0" mapy="4"/>
	</tile>
		
		<!-- This tile only appears after the player made the bridge -->
		<!-- It replaces the previously specified water tile -->
	<tile name="bridge" xpos="1" ypos="2">
		<tilemap mapname="bridge" mapx="0" mapy="0"/>
		<condition>
			<didEvent>madeBridge</didEvent>
		</condition>
	</tile>
				
		
	<mo name="Dog" type="npc" xpos="2" ypos="0">
		<spriteRef>animals/Dog1</spriteRef>
		<event name="DogBark" triggerType="talk">
			<say speaker="Dog">Woof!</say>
		</event>
		<directionBlock east="true" north="true" south="true" west="true"/>
	</mo>
		
		
	<mo name="Door" type="door" xpos="2" ypos="2">
		<event name="enterOctaviaInn" triggerType="step">
			<loadLevel name="ocataviaInn" startx="4" starty="3"/>
		</event>
	</mo>
	<mo name="Action" type="event" xpos="2" ypos="0">
			<!-- When you step on this square, -->
		<event name="mordusDances" triggerType="step">
			
			<!-- If you have completed the "foundMordus" event and you either have >= 50000 gold or the golden staff -->
			<condition>
				<operator>
					<and>
						<didEvent>foundMordus</didEvent>
						<operator>
							<or>
								<hasGold operator="gte">50000</hasGold>
								<hasItem>
									<itemRef itemType="Weapon">GoldenStaff</itemRef>
								</hasItem>
							</or>
						</operator>
						
					</and>
							
					
				</operator>
			</condition>
				<!-- then mordus dances -->
			<playAnimation>mordusDances</playAnimation>
			
		</event>
	</mo>
</level>
		

